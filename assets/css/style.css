---
---

/* ===============================
   Rekiden Theme (Glossy Light Walnut)
   one-sheet wood background + readable panels
   =============================== */

/* ---- Global scope ---- */
body.theme-rekiden {
  /* Colors & typography */
  --rk-ink:    #f4f1e6;  /* body text */
  --rk-head:   #f0d090;  /* headings */
  --rk-accent: #b48a60;  /* borders / accents */

  /* Table stripe colors */
  --rk-row-odd:  rgba(180,138,96,.16);
  --rk-row-even: rgba(120, 90,60,.26);

  color: var(--rk-ink);
  font-family: "Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Times New Roman",serif;
  font-feature-settings: "palt" 1, "pkna" 1;
  font-size: 17px;
  line-height: 1.85;

  /* === Background: glossy walnut one-sheet === */
  background-color:#a97939; /* 画像ロード前の下地 */
  background-image:url("/Rekiden/assets/bg/rekiden-wood-gloss-long.png");
  background-repeat:no-repeat;
  background-position:center top;
  background-size:cover;      /* 全画面を木目で覆う */
  background-attachment:scroll;
  background-blend-mode:normal;
}

/* ---- Headings ---- */
body.theme-rekiden h1,
body.theme-rekiden h2,
body.theme-rekiden h3 {
  color: var(--rk-head);
  font-weight: 700;
  border-bottom: 2px solid var(--rk-accent);
  padding-bottom: 4px;
  margin: 1.1em 0 .6em;
}
body.theme-rekiden h1 { font-size: 2rem; }
body.theme-rekiden h2 { font-size: 1.6rem; }
body.theme-rekiden h3 { font-size: 1.3rem; }

/* ---- Links ---- */
body.theme-rekiden a {
  color: #f0c060;
  font-weight: 600;
  text-decoration: none;
}
body.theme-rekiden a:hover {
  color: #dba84f;
  text-decoration: underline;
}

/* ---- Blockquote ---- */
body.theme-rekiden blockquote {
  margin: .9em 0;
  padding: .7em 1em;
  color: #fff1d8;
  background: rgba(255,255,255,.08);
  border-left: 6px solid var(--rk-accent);
  border-radius: 6px;
}

/* ---- Tables ---- */
body.theme-rekiden .table-wrap { overflow: auto; border-radius: 8px; }

body.theme-rekiden table {
  width: 100%;
  border-collapse: collapse;
  margin: 1em 0;
  border: 1.5px solid rgba(255,255,255,.14);
  background: transparent;
}

body.theme-rekiden table,
body.theme-rekiden table th,
body.theme-rekiden table td {
  background: transparent !important;
  color: var(--rk-ink);
  border: 1px solid rgba(255,255,255,.16);
}

body.theme-rekiden tbody tr:nth-child(odd)  { background-color: var(--rk-row-odd); }
body.theme-rekiden tbody tr:nth-child(even) { background-color: var(--rk-row-even); }

body.theme-rekiden thead th {
  background-color: rgba(255,220,160,.18) !important;
  color: #fff5dc !important;
  font-weight: 700;
  text-align: left;
  border: 1.5px solid rgba(255,255,255,.16);
}

body.theme-rekiden td,
body.theme-rekiden th { padding: .7em .9em; }

body.theme-rekiden tbody tr:hover {
  background-color: rgba(180,138,96,.34) !important;
}

/* ---- Wrapper / Panels ---- */
/* 木目を透かしつつ、読みやすさ優先（透過率0.75） */
body.theme-rekiden .wrapper,
body.theme-rekiden .panel,
body.theme-rekiden .card,
body.theme-rekiden .box,
body.theme-rekiden .page-content {
  background: rgba(60, 40, 25, 0.5) !important;
  border: 1px solid rgba(0,0,0,.25) !important;
  box-shadow: 0 6px 18px rgba(0,0,0,.35) !important;
  border-radius: 10px !important;
  padding: min(2.0vw, 1.5rem);
}

/* ---- Mobile tweaks ---- */
@media (max-width: 640px) {
  body.theme-rekiden h1 { font-size: 1.7rem; }
  body.theme-rekiden h2 { font-size: 1.35rem; }
  body.theme-rekiden .wrapper { padding: 16px 12px; }
}

/* ---- Motion/Perf friendly ---- */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* ---- 強制透明化で木目を塞がないようにする ---- */
body.theme-rekiden header,
body.theme-rekiden footer,
body.theme-rekiden .site-header,
body.theme-rekiden .site-footer {
  background: transparent !important;
  background-image: none !important;
  backdrop-filter: none !important;
}
body.theme-rekiden header::before,
body.theme-rekiden header::after,
body.theme-rekiden footer::before,
body.theme-rekiden footer::after {
  content: none !important;
  background: none !important;
  opacity: 0 !important;
  mix-blend-mode: normal !important;
}

/* ===== One-panel mode: 余分な層を撤去 ===== */

/* 外側の層は完全透明＆影/枠/余白もオフ */
body.theme-rekiden .page-content,
body.theme-rekiden main.page-content,
body.theme-rekiden .container {
  background: transparent !important;
  background-image: none !important;
  box-shadow: none !important;
  border: 0 !important;
  padding: 0 !important;
}

/* 擬似要素の帯も撤去 */
body.theme-rekiden .page-content::before,
body.theme-rekiden .page-content::after,
body.theme-rekiden .container::before,
body.theme-rekiden .container::after {
  content: none !important;
  background: none !important;
  opacity: 0 !important;
  mix-blend-mode: normal !important;
}

/* パネルは wrapper だけに集約（背景0.50で読みやすさ維持） */
body.theme-rekiden .wrapper {
  background: rgba(60, 40, 25, 0.65) !important;  /* 透過率はお好みで */
  border: 1px solid rgba(0,0,0,.25) !important;
  box-shadow: 0 6px 18px rgba(0,0,0,.35) !important;
  border-radius: 10px !important;
  padding: min(2.0vw, 1.5rem) !important;
  margin: 0 auto !important; /* 既定の中央寄せを維持 */
}

/* 内側カード系は全部透明（パネルを増やさない） */
body.theme-rekiden .panel,
body.theme-rekiden .card,
body.theme-rekiden .box {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* === 本文へスキップを非表示 === */
body.theme-rekiden a.visually-hidden {
  display: none !important;
}

/* === Inline code / kbd の白塗り改善 === */
body.theme-rekiden code,
body.theme-rekiden kbd {
  background: rgba(0,0,0,0.25) !important;  /* 暗め半透明ラベル */
  color: #fff5dc !important;                /* 明るい文字色 */
  border-radius: 4px;
  padding: 0.1em 0.4em;
  font-family: "Courier New", monospace;
}

body.theme-rekiden code,
body.theme-rekiden kbd {
  background: rgba(0,0,0,0.25) !important;
  color: #f4e2b8 !important; /* クリーム色 */
  border-radius: 4px;
  padding: 0.1em 0.4em;
  font-family: "Courier New", monospace;
}

/* === Code blocks (fenced) の白背景を無効化して木目になじませる === */
body.theme-rekiden pre,
body.theme-rekiden pre code,
body.theme-rekiden figure.highlight,
body.theme-rekiden .highlight,
body.theme-rekiden .highlight pre,
body.theme-rekiden .highlight code,
body.theme-rekiden .highlighter-rouge,
body.theme-rekiden .language-plaintext {
  background: rgba(0,0,0,0.35) !important;  /* 落ち着いた半透明ダーク */
  color: #f6efe0 !important;                 /* 明るすぎない生成色 */
  border: 1px solid rgba(255,255,255,.12) !important;
  border-radius: 8px !important;
  box-shadow: none !important;
}

/* コードブロック内の行番号や表も白くならないように */
body.theme-rekiden .highlight table,
body.theme-rekiden .highlight td,
body.theme-rekiden .highlight th {
  background: transparent !important;
  border-color: rgba(255,255,255,.12) !important;
}

/* 余白を少し詰める（お好みで） */
body.theme-rekiden pre,
body.theme-rekiden .highlight pre {
  padding: 0.9em 1.1em !important;
  margin: 0.8em 0 !important;
}
