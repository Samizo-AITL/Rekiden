/* ===============================
   Rekiden Theme (Dark Wood) — compact v1.0
   =============================== */

/* ---- Global scope for the theme ---- */
body.theme-rekiden {
  /* Colors & typography */
  --rk-ink:    #f4f1e6;  /* body text */
  --rk-head:   #f0d090;  /* headings */
  --rk-accent: #b48a60;  /* borders / accents */

  /* Row colors for tables (non-white) */
  --rk-row-odd:  rgba(180,138,96,.16);
  --rk-row-even: rgba(120, 90,60,.26);

  color: var(--rk-ink);
  font-family: "Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Times New Roman",serif;
  font-feature-settings: "palt" 1, "pkna" 1;
  font-size: 17px;
  line-height: 1.85;

  /* Background: wood image + subtle overlays
     NOTE: 拡張子の大小は実ファイルに合わせて。 */
  background-image:
    url("{{ '/assets/bg/wood-dark.PNG' | relative_url }}?v={{ site.time | date: '%s' }}"),
    radial-gradient(ellipse at 28% 22%, rgba(255,255,255,.08) 0 40%, transparent 60%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 2px, transparent 2px 7px),
    repeating-linear-gradient(0deg,  rgba(0,0,0,.08) 0 1px,  transparent 1px 5px);
  background-size: 840px auto, 360px 360px, 12px 100%, 100% 6px;
  background-position: center top, center, left top, left top;
  background-repeat: repeat, repeat, repeat, repeat;
  background-attachment: fixed, fixed, fixed, fixed; /* 木目を固定 */
  background-color: #342419;                          /* 画像ロード前の色 */
  background-blend-mode: multiply, normal, normal, normal;
}

/* Battery / motion friendly: 固定解除（iOS等の負荷/チラつき回避） */
@media (prefers-reduced-motion: reduce) {
  body.theme-rekiden { background-attachment: scroll; }
}

/* ---- Content panel (透けパネル) ---- */
body.theme-rekiden main.page,
body.theme-rekiden .page-content > .wrapper {
  background: rgba(60, 40, 25, .80);
  color: var(--rk-ink);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,.6);
  /* 既存 wrapper の内側余白は layout 側でも良いが、保険で軽く確保 */
  padding: min(2.0vw, 1.5rem);
}

/* ---- Headings ---- */
body.theme-rekiden h1,
body.theme-rekiden h2,
body.theme-rekiden h3 {
  color: var(--rk-head);
  font-weight: 700;
  border-bottom: 2px solid var(--rk-accent);
  padding-bottom: 4px;
  margin: 1.1em 0 .6em;
}
body.theme-rekiden h1 { font-size: 2rem; }
body.theme-rekiden h2 { font-size: 1.6rem; }
body.theme-rekiden h3 { font-size: 1.3rem; }

/* ---- Links ---- */
body.theme-rekiden a {
  color: #f0c060;
  font-weight: 600;
  text-decoration: none;
}
body.theme-rekiden a:hover {
  color: #dba84f;
  text-decoration: underline;
}

/* ---- Blockquote ---- */
body.theme-rekiden blockquote {
  margin: .9em 0;
  padding: .7em 1em;
  color: #fff1d8;
  background: rgba(255,255,255,.08);
  border-left: 6px solid var(--rk-accent);
  border-radius: 6px;
}

/* ---- Vignette (軽い重厚感) ---- */
body.theme-rekiden::before {
  content: "";
  position: fixed; inset: 0;
  pointer-events: none; z-index: -1;
  background:
    radial-gradient(ellipse at 50% 30%, rgba(255,255,255,.06), transparent 60%),
    linear-gradient(to bottom, rgba(0,0,0,.18), rgba(0,0,0,.28));
  mix-blend-mode: overlay;
  opacity: .35;
}

/* ---- Tables (白浮き除去・暖色ゼブラ) ---- */
body.theme-rekiden .table-wrap { overflow: auto; border-radius: 8px; }

body.theme-rekiden table {
  width: 100%;
  border-collapse: collapse;
  margin: 1em 0;
  border: 1.5px solid rgba(255,255,255,.14);
  background: transparent;
}

/* まず既存テーマの白背景をまとめて打ち消す（必要最低限の !important） */
body.theme-rekiden table,
body.theme-rekiden table th,
body.theme-rekiden table td {
  background: transparent !important;
  color: var(--rk-ink);
  border: 1px solid rgba(255,255,255,.16);
}

/* ゼブラは tr にのみ背景色を適用（td/th は透過のまま） */
body.theme-rekiden tbody tr:nth-child(odd)  { background-color: var(--rk-row-odd); }
body.theme-rekiden tbody tr:nth-child(even) { background-color: var(--rk-row-even); }

/* ヘッダー */
body.theme-rekiden thead th {
  background-color: rgba(255,220,160,.18) !important;
  color: #fff5dc !important;
  font-weight: 700;
  text-align: left;
  border: 1.5px solid rgba(255,255,255,.16);
}

/* セル余白 */
body.theme-rekiden td,
body.theme-rekiden th { padding: .7em .9em; }

/* Hover 強調（行単位） */
body.theme-rekiden tbody tr:hover {
  background-color: rgba(180,138,96,.34) !important;
}

/* ---- Mobile tweaks ---- */
@media (max-width: 640px) {
  body.theme-rekiden h1 { font-size: 1.7rem; }
  body.theme-rekiden h2 { font-size: 1.35rem; }
  body.theme-rekiden main.page,
  body.theme-rekiden .page-content > .wrapper { padding: 16px 12px; }
}
