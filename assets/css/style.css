/* ===============================
   Rekiden Theme (Dark Wood) – 全ページ固定
   =============================== */
body.theme-rekiden{
  /* 色と本文書体（クラシカル） */
  --rk-ink:#f4f1e6;         /* 本文 */
  --rk-head:#f0d090;        /* 見出し */
  --rk-accent:#b48a60;      /* 線/アクセント */
  font-family:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Times New Roman",serif;
  font-feature-settings:"palt" 1,"pkna" 1;
  line-height:1.85; font-size:17px; color:var(--rk-ink);

  /* 木目：画像＋擬似木目（画像は PNG 大文字拡張子に合わせる） */
  background-image:
    url("{{ '/assets/bg/wood-dark.PNG' | relative_url }}?v={{ site.time | date: '%s' }}"),
    radial-gradient(ellipse at 28% 22%, rgba(255,255,255,.08) 0 40%, transparent 60%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 2px, transparent 2px 7px),
    repeating-linear-gradient(0deg,  rgba(0,0,0,.08) 0 1px,  transparent 1px 5px);
  background-size: 840px auto, 360px 360px, 12px 100%, 100% 6px;
  background-position: center top, center, left top, left top;
  background-repeat: repeat, repeat, repeat, repeat;
  background-attachment: fixed, fixed, fixed, fixed;
  background-color:#342419;
  background-blend-mode: multiply, normal, normal, normal; /* 画像だけ濃く */
}

/* 本文パネル（wrapper/直 main どちらでも効く） */
body.theme-rekiden main.page,
body.theme-rekiden .page-content > .wrapper{
  background:rgba(60,40,25,.80) !important; /* 木目がうっすら見える */
  color:var(--rk-ink);
  border:1px solid rgba(255,255,255,.14);
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.6);
}

/* 見出し */
body.theme-rekiden h1,
body.theme-rekiden h2,
body.theme-rekiden h3{
  color:var(--rk-head); font-weight:700;
  border-bottom:2px solid var(--rk-accent);
  padding-bottom:4px; margin:1.1em 0 .6em;
}
body.theme-rekiden h1{ font-size:2rem; }
body.theme-rekiden h2{ font-size:1.6rem; }
body.theme-rekiden h3{ font-size:1.3rem; }

/* リンク */
body.theme-rekiden a{ color:#f0c060; font-weight:600; text-decoration:none; }
body.theme-rekiden a:hover{ color:#dba84f; text-decoration:underline; }

/* ============================================================
   表（白浮きを除去・暖色ゼブラ） ★ここ置き換え
   ============================================================ */
body.theme-rekiden table{
  width:100%;
  border-collapse:collapse;
  margin:1em 0;
  border:1.5px solid rgba(255,255,255,.14);
  background:none;
}

/* 行ベース色の変数（白は使わない） */
body.theme-rekiden{
  --rk-row-odd:  rgba(180,138,96,.16);  /* 薄茶 */
  --rk-row-even: rgba(120, 90,60,.26);  /* さらに濃い */
}

body.theme-rekiden thead th{
  background:rgba(255,220,160,.18);
  color:#fff5dc;
  font-weight:700;
  text-align:left;
  border:1.5px solid rgba(255,255,255,.16);
  padding:.7em .9em;
}

/* 行ごとに色を付ける。セルは透過 */
body.theme-rekiden tbody tr:nth-child(odd){  background-color: var(--rk-row-odd); }
body.theme-rekiden tbody tr:nth-child(even){ background-color: var(--rk-row-even); }

body.theme-rekiden tbody td,
body.theme-rekiden tbody th{
  background:transparent;
  color:var(--rk-ink);
  border:1px solid rgba(255,255,255,.16);
  padding:.7em .9em;
}

/* hoverで軽く強調 */
body.theme-rekiden tbody tr:hover{
  background-color: rgba(180,138,96,.34);
}

/* 引用 */
body.theme-rekiden blockquote{
  margin:.9em 0; padding:.7em 1em; color:#fff1d8;
  background:rgba(255,255,255,.08);
  border-left:6px solid var(--rk-accent);
  border-radius:6px;
}

/* ビネット効果で重厚感を少し追加（描画は軽い） */
body.theme-rekiden::before{
  content:"";
  position:fixed; inset:0; pointer-events:none; z-index:-1;
  background:
    radial-gradient(ellipse at 50% 30%, rgba(255,255,255,.06), transparent 60%),
    linear-gradient(to bottom, rgba(0,0,0,.18), rgba(0,0,0,.28));
  mix-blend-mode: overlay; opacity:.35;
}

/* モバイル最適化 */
@media (max-width:640px){
  body.theme-rekiden .page-content > .wrapper,
  body.theme-rekiden main.page{ padding:16px 12px; }
  body.theme-rekiden h1{ font-size:1.7rem; }
  body.theme-rekiden h2{ font-size:1.35rem; }
}

/* 省エネ設定 → 固定背景解除 */
@media (prefers-reduced-motion:reduce){
  body.theme-rekiden{ background-attachment:scroll; }
}

/* ===============================
   Rekiden Theme (Dark Wood) – 背景を木目固定
   =============================== */
body.theme-rekiden{
  /* 文字色など */
  --rk-ink:#f4f1e6;
  --rk-head:#f0d090;
  --rk-accent:#b48a60;
  font-family:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Times New Roman",serif;
  font-feature-settings:"palt" 1,"pkna" 1;
  line-height:1.85; font-size:17px; color:var(--rk-ink);

  /* 木目背景：画像 + ほんのり擬似木目（画像は拡張子 PNG 大文字に合わせる） */
  background-image:
    url("{{ '/assets/bg/wood-dark.PNG' | relative_url }}?v={{ site.time | date: '%s' }}"),
    radial-gradient(ellipse at 28% 22%, rgba(255,255,255,.08) 0 40%, transparent 60%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 2px, transparent 2px 7px),
    repeating-linear-gradient(0deg,  rgba(0,0,0,.08) 0 1px,  transparent 1px 5px);
  background-size: 840px auto, 360px 360px, 12px 100%, 100% 6px;
  background-position: center top, center, left top, left top;
  background-repeat: repeat, repeat, repeat, repeat;
  background-attachment: fixed, fixed, fixed, fixed; /* スクロールで木目を固定 */
  background-color:#342419;                       /* 画像読み込み前の色 */
  background-blend-mode: multiply, normal, normal, normal; /* 画像だけ濃く */
}

/* 中身のパネルは半透明で木目を透かす */
body.theme-rekiden main.page,
body.theme-rekiden .page-content > .wrapper{
  background:rgba(60,40,25,.80);
  color:var(--rk-ink);
  border:1px solid rgba(255,255,255,.14);
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.6);
}

/*（以下は任意：見出し/リンク/表など。前に渡した版を使ってOK）*/

/* 省エネ：動きを減らす設定の人には固定を解除 */
@media (prefers-reduced-motion:reduce){
  body.theme-rekiden{ background-attachment:scroll; }
}

/* ===== Rekiden table override (force) ===== */
/* 行カラー（白は使わない） */
body.theme-rekiden{
  --rk-row-odd:  rgba(180,138,96,.16);
  --rk-row-even: rgba(120, 90,60,.26);
}

/* まず既存の白背景を“全部”打ち消す */
body.theme-rekiden table,
body.theme-rekiden table *,
body.theme-rekiden table tbody tr:nth-child(odd) td,
body.theme-rekiden table tbody tr:nth-child(even) td,
body.theme-rekiden table tbody td,
body.theme-rekiden table thead th{
  background: transparent !important;
  background-color: transparent !important;
}

/* 行にだけ色を付ける（ゼブラ）。td/thは透過のまま */
body.theme-rekiden table tbody tr:nth-child(odd){
  background-color: var(--rk-row-odd) !important;
}
body.theme-rekiden table tbody tr:nth-child(even){
  background-color: var(--rk-row-even) !important;
}

/* 枠線・文字色を再設定 */
body.theme-rekiden table{
  width:100%;
  border-collapse: collapse;
  margin:1em 0;
  border:1.5px solid rgba(255,255,255,.14);
}
body.theme-rekiden table td,
body.theme-rekiden table th{
  color: var(--rk-ink);
  border:1px solid rgba(255,255,255,.16);
  padding:.7em .9em;
}
body.theme-rekiden table thead th{
  color:#fff5dc;
  font-weight:700;
  text-align:left;
  border:1.5px solid rgba(255,255,255,.16);
}

/* 触感強調（任意） */
body.theme-rekiden table tbody tr:hover{
  background-color: rgba(180,138,96,.34) !important;
}
