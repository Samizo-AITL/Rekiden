/* ===============================
   Rekiden Theme (Dark Wood) – 全ページ固定
   =============================== */
body.theme-rekiden{
  --rk-ink:#f4f1e6;         /* 本文 */
  --rk-head:#f0d090;        /* 見出し */
  --rk-accent:#b48a60;      /* 線/アクセント */

  font-family:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Times New Roman",serif;
  font-feature-settings:"palt" 1,"pkna" 1;
  line-height:1.85; font-size:17px; color:var(--rk-ink);

  /* 木目：画像→擬似木目→単色 の順でフォールバック */
  background:
    url("{{ '/assets/bg/wood-dark.PNG' | relative_url }}") repeat,
    radial-gradient(ellipse at 20% 30%, rgba(255,255,255,.06) 0 40%, transparent 45%),
    radial-gradient(ellipse at 70% 60%, rgba(255,255,255,.05) 0 35%, transparent 40%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.035) 0 2px, transparent 2px 6px),
    repeating-linear-gradient(0deg,  rgba(0,0,0,.06) 0 1px,  transparent 1px 4px);
  background-size:auto,340px 340px,340px 340px,12px 100%,100% 6px;
  background-position:center center;
  background-attachment:fixed;
  background-color:#3b2a1a;
}

/* 本文パネル（wrapper/直 main どちらでも効く） */
body.theme-rekiden main.page,
body.theme-rekiden .page-content > .wrapper{
  background:rgba(60,40,25,.78) !important;  /* 木目がうっすら見える */
  color:var(--rk-ink);
  border:1px solid rgba(255,255,255,.14);
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.6);
}

/* 見出し */
body.theme-rekiden h1,
body.theme-rekiden h2,
body.theme-rekiden h3{
  color:var(--rk-head); font-weight:700;
  border-bottom:2px solid var(--rk-accent);
  padding-bottom:4px; margin:1.1em 0 .6em;
}
body.theme-rekiden h1{ font-size:2rem; }
body.theme-rekiden h2{ font-size:1.6rem; }
body.theme-rekiden h3{ font-size:1.3rem; }

/* リンク */
body.theme-rekiden a{ color:#f0c060; font-weight:600; text-decoration:none; }
body.theme-rekiden a:hover{ color:#dba84f; text-decoration:underline; }

/* 表：白ストライプを完全無効化して薄いストライプに統一 */
body.theme-rekiden table{
  width:100%; border-collapse:collapse; margin:1em 0;
  border:1.5px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06);
}
body.theme-rekiden th{
  background:rgba(255,255,255,.12);
  color:#fff5dc; font-weight:700; text-align:left;
  border:1.5px solid rgba(255,255,255,.16);
  padding:.7em .9em;
}
/* ▼ 他CSSの白背景を打ち消すために !important 付きで上書き */
body.theme-rekiden td{
  border:1px solid rgba(255,255,255,.16);
  color:var(--rk-ink);
  padding:.7em .9em;
  background:transparent !important;
}
body.theme-rekiden tbody tr:nth-child(odd)  td{ background:transparent !important; }
body.theme-rekiden tbody tr:nth-child(even) td{ background:rgba(255,255,255,.045) !important; }

/* 引用 */
body.theme-rekiden blockquote{
  margin:.9em 0; padding:.7em 1em; color:#fff1d8;
  background:rgba(255,255,255,.08);
  border-left:6px solid var(--rk-accent);
  border-radius:6px;
}

/* モバイル */
@media (max-width:640px){
  body.theme-rekiden .page-content > .wrapper,
  body.theme-rekiden main.page{ padding:16px 12px; }
  body.theme-rekiden h1{ font-size:1.7rem; }
  body.theme-rekiden h2{ font-size:1.35rem; }
}

/* 動きを抑える設定 → 固定背景解除 */
@media (prefers-reduced-motion:reduce){
  body.theme-rekiden{ background-attachment:scroll; }
}

/* ===============================
   Rekiden Theme (Dark Wood) — 強めの木目
   =============================== */
body.theme-rekiden{
  --rk-ink:#f4f1e6; --rk-head:#f0d090; --rk-accent:#b48a60;

  font-family:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Times New Roman",serif;
  font-feature-settings:"palt" 1,"pkna" 1;
  line-height:1.85; font-size:17px; color:var(--rk-ink);

  /* 画像＋擬似木目。画像は multiply で濃く、横筋＆年輪を追加 */
  background-image:
    url("{{ '/assets/bg/wood-dark.PNG' | relative_url }}?v={{ site.time | date: '%s' }}"),
    radial-gradient(ellipse at 28% 22%, rgba(255,255,255,.08) 0 40%, transparent 60%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 2px, transparent 2px 7px),
    repeating-linear-gradient(0deg,  rgba(0,0,0,.08) 0 1px,  transparent 1px 5px);
  background-size: 840px auto, 360px 360px, 12px 100%, 100% 6px;
  background-position: center top, center, left top, left top;
  background-repeat: repeat, repeat, repeat, repeat;
  background-attachment: fixed, fixed, fixed, fixed;
  background-color:#342419;
  /* 画像レイヤのみ multiply で“木”を濃く、それ以外は通常 */
  background-blend-mode: multiply, normal, normal, normal;
}

/* 画面全体の軽いビネット＆艶（質感アップ用） */
body.theme-rekiden::before{
  content:"";
  position:fixed; inset:0; pointer-events:none; z-index:-1;
  background:
    radial-gradient(ellipse at 50% 30%, rgba(255,255,255,.06), transparent 60%),
    linear-gradient(to bottom, rgba(0,0,0,.18), rgba(0,0,0,.28));
  mix-blend-mode: overlay;
  opacity:.35;
}

/* 本文パネル（木目が透ける） */
body.theme-rekiden main.page,
body.theme-rekiden .page-content > .wrapper{
  background:rgba(60,40,25,.80) !important;
  color:var(--rk-ink);
  border:1px solid rgba(255,255,255,.14);
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.6);
}

/* 見出し */
body.theme-rekiden h1, body.theme-rekiden h2, body.theme-rekiden h3{
  color:var(--rk-head); font-weight:700;
  border-bottom:2px solid var(--rk-accent);
  padding-bottom:4px; margin:1.1em 0 .6em;
}
body.theme-rekiden h1{ font-size:2rem; }
body.theme-rekiden h2{ font-size:1.6rem; }
body.theme-rekiden h3{ font-size:1.3rem; }

/* リンク */
body.theme-rekiden a{ color:#f0c060; font-weight:600; text-decoration:none; }
body.theme-rekiden a:hover{ color:#dba84f; text-decoration:underline; }

/* 表（白ストライプ完全排除＋薄ストライプ） */
body.theme-rekiden table{
  width:100%; border-collapse:collapse; margin:1em 0;
  border:1.5px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06);
}
body.theme-rekiden th{
  background:rgba(255,255,255,.12);
  color:#fff5dc; font-weight:700; text-align:left;
  border:1.5px solid rgba(255,255,255,.16);
  padding:.7em .9em;
}
body.theme-rekiden td{
  border:1px solid rgba(255,255,255,.16);
  color:var(--rk-ink);
  padding:.7em .9em;
  background:transparent !important;
}
body.theme-rekiden tbody tr:nth-child(odd)  td{ background:transparent !important; }
body.theme-rekiden tbody tr:nth-child(even) td{ background:rgba(255,255,255,.045) !important; }

/* 引用 */
body.theme-rekiden blockquote{
  margin:.9em 0; padding:.7em 1em; color:#fff1d8;
  background:rgba(255,255,255,.08);
  border-left:6px solid var(--rk-accent);
  border-radius:6px;
}

/* モバイル最適化 */
@media (max-width:640px){
  body.theme-rekiden .page-content > .wrapper,
  body.theme-rekiden main.page{ padding:16px 12px; }
  body.theme-rekiden h1{ font-size:1.7rem; }
  body.theme-rekiden h2{ font-size:1.35rem; }
}

/* 動きを抑える設定 → 固定背景解除 */
@media (prefers-reduced-motion:reduce){
  body.theme-rekiden{ background-attachment:scroll; }
}
